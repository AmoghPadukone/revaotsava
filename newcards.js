// Sample JSON data
var data = {
  "DANCE": [
    {
      title: "ClASSICAL SOLO DANCE",
      description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Maecenas volutpat blandit aliquam etiam erat velit scelerisque in dictum. Purus sit amet volutpat consequat mauris nunc congue nisi. Dolor morbi non arcu risus quis varius quam quisque. Aenean pharetra magna ac placerat. Sit amet luctus venenatis lectus magna fringilla urna. Vestibulum rhoncus est pellentesque elit ullamcorper dignissim. Ipsum suspendisse ultrices gravida dictum fusce ut placerat orci. Metus aliquam eleifend mi in nulla. Eget velit aliquet sagittis id consectetur purus ut. Faucibus turpis in eu mi bibendum neque egestas congue quisque. Metus aliquam eleifend mi in nulla posuere. Praesent tristique magna sit amet purus. Vel facilisis volutpat est velit egestas. Venenatis cras sed felis eget velit aliquet. Habitant morbi tristique senectus et.",
      imageSrc: "images/CLASSICALSOLO.png",
      badgeText: [4, "5000", "3000"],
    },
    {
      title: "STREET DANCE FACEOFF",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: [4, "5000", "3000"],
    },
    {
      title: "CLASSICAL GROUP DANCE",
      description: "Description 1",
      imageSrc: "images/CLASSICALGROUPDANCE.png",
      badgeText: [5, "15000", "8000"],
    },
    {
      title: "WESTERN GROUP DANCE",
      description: "Description 1",
      imageSrc: "images/WESTERNGROUPDANCE.png",
      badgeText: [5, "15000", "8000"],
    },
    {
      title: "FOLK GROUP DANCE",
      description: "Description 1",
      imageSrc: "images/FOLKGROUPDANCE.png",
      badgeText: [4, "15000", "8000"],
    },
  ],
  "MUSIC": [
    {
      title: "BATTLE OF BANDS",
      description: "Description 1",
      imageSrc: "images/BATTLEOFBANDS.png",
      badgeText: [5, "15000", "8000"],
    },
    {
      title: "CLASSICAL SOLO",
      description: "Description 1",
      imageSrc: "images/IndianClassical.png",
      badgeText: [3, "5000", "3000"],
    },
    {
      title: "WESTERN SOLO",
      description: "Description 1",
      imageSrc: "images/WesternSolo.png",
      badgeText: [3, "5000", "3000"],
    },
  ],
  "MEDIA": [
    {
      title: "PHOTOGRAPHY",
      description: "Description 1",
      imageSrc: "images/Photography.png",
      badgeText: [4, "5000", "3000"],
    },
    {
      title: "SHORT FILM",
      description: "Description 1",
      imageSrc: "images/ShortFilm.png",
      badgeText: [5, "10000", "6000"],
    },
  ],
  "FASHION": [
      {
        title: "FASHION SHOW",
        description: "Description 1",
        imageSrc: "images/ShortFilm.png",
        badgeText: [5, "25000", "15000"],
        regfee : 2500
      }
  ],
  "SPORTS": [
    {
      title: "FOOTBALL",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: [5,"10000", "6000"],
      regfee : 1000

    },
    {
      title: "KABBADI",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: [5, "10000", "6000"],
      regfee : 1000

    },
  ],
  "TECHNICAL": [
    {
      title: "RC DRAG AND ENDURANCE",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: [5, "15000", "10000"],
      regfee : 1000

    },
    {
      title: "LINE FOLLOW ROBOT",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: [4, "3000", "200"],
      regfee : 300

    },
    {
      title: "DRONE",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: [4, "15000", "10000"],
      regfee : 1500
    
    },
  ],
  "MANAGEMENT": [
    {
      title: "OPERATIONS",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["MANAGEMENT", "S905", "S205"],
    },
    {
      title: "AD REELS",
      description: "Description 1",
      imageSrc: "/images/adreels.png",
      badgeText: ["MANAGEMENT", "S907", "S207"],
    },
    {
      title: "MAD ADS",
      description: "Description 1",
      imageSrc: "/images/madads.png",
      badgeText: ["MANAGEMENT", "S908", "S208"],
    },
    {
      title: "BEST MANAGEMENT",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["MANAGEMENT", "S900", "S200"],
    },
    {
      title: "HR",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["MANAGEMENT", "S901", "S201"],
    },
    {
      title: "FINANCE",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["MANAGEMENT", "S902", "S202"],
    },
    {
      title: "TREASURE HUNT",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["MANAGEMENT", "S903", "S203"],
    },
    {
      title: "BEST MANAGER",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["MANAGEMENT", "S904", "S204"],
    },
    {
      title: "MARKETING",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["MANAGEMENT", "S906", "S206"],
    },
    {
      title: "BEST ENTREPRENEUR",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["MANAGEMENT", "S909", "S209"],
    },
  ],
  "THEATER": [
    {
      title: "MIME",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["THEATRE", "5000", "3000"],
    },
    {
      title: "SKIT",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["THEATRE", "8000", "5000"],
    },
  ],
  "ARTS": [
    {
      title: "FACE PAINTING",
      description: "Description 1",
      imageSrc: "images/FacePainting.png",
      badgeText: ["FINE ARTS", "5000", "3000"],
    },
    {
      title: "ILLUSTRATION/DIGITAL ART",
      description: "Description 1",
      imageSrc: "images/DigitalArt.png",
      badgeText: ["FINE ARTS", "3000", "1500"],
    },
    {
      title: "CLAY MODELING",
      description: "Description 1",
      imageSrc: "/images/claymodelling.png",
      badgeText: ["FINE ARTS", "3000", "1500"],
    },
  ],
  "LITERACY": [
    {
      title: "POETRY",
      description: "Description 1",
      imageSrc: "images/poetry.png",
      badgeText: ["LITERARY", "4000", "2000"],
    },
    {
      title: "JAM",
      description: "Description 1",
      imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
      badgeText: ["LITERARY", "3000", "1500"],
    },
    {
      title: "DEBATE",
      description: "Description 1",
      imageSrc: "images/DEBATE.png",
      badgeText: ["LITERARY", "3000", "1500"],
    },
  ]


};


// Generate categories
const categoryBody = document.getElementById("bodytag");

const categorySection = document.createElement("div");
categorySection.classList.add("sectiontag");


const outerWrapper = document.createElement("div");
outerWrapper.classList.add("outer-wrapper");

const innerWrapper = document.createElement("div");
innerWrapper.classList.add("inner-wrapper");

// category.classList.add("");

var categories = Object.keys(data);
for (var i = 0; i < categories.length; i++) {
    const category = document.createElement("button");
    category.className = "category underline pseudo-item pop";
    // category.classList.add=""
    category.innerText = categories[i];
    category.onclick = function () {
        loadCards(this.innerText);
    };
    innerWrapper.appendChild(category);
}


categoryBody.appendChild(categorySection);
categorySection.appendChild(outerWrapper);

outerWrapper.appendChild(innerWrapper);

// Load cards for selected category
function loadCards(category) {
  var cardData = data[category];
  console.log(cardData);
  var cardsDiv = document.getElementById("cards");
  cardsDiv.innerHTML = "";
  for (var i = 0; i < cardData.length; i++) {

    const cards = document.createElement("div");
    cards.classList.add("card");

    const cardImgContainer = document.createElement("div");
    cardImgContainer.classList.add("card-img-container");

    const cardImgDiv = document.createElement("div");
    cardImgDiv.classList.add("card-img");

    const cardImg = document.createElement("img");
    cardImg.src = cardData[i].imageSrc;
    cardImg.classList.add("card-img");

    cardImgDiv.appendChild(cardImg);
    cardImgContainer.appendChild(cardImgDiv);

    const cardBadges = document.createElement("div");
    cardBadges.classList.add("card-badges");

    cardData[i].badgeText.map((item) => {
      const badge = document.createElement("div");
      badge.classList.add("badge");
      // if(item)
      if(typeof(item)==="string"){
        badge.textContent = item;
      }else{

       const staricon = document.createElement("span")
       staricon.classList.add("material-symbols-outlined")
       staricon.innerText="magic_button"

       badge.appendChild(staricon);
        
       const rate = document.createElement("p");
       rate.innerText = item;
       badge.appendChild(rate);
        
      }

      cardBadges.appendChild(badge);
    });


    cardImgContainer.appendChild(cardBadges);

    const cardInfo = document.createElement("div");
    cardInfo.classList.add("card-info");

    const cardTitle = document.createElement("div");
    cardTitle.classList.add("card-title");
    cardTitle.innerHTML = cardData[i].title;

    cardInfo.appendChild(cardTitle);


    cardregistrationfee = document.createElement("div")
    cardregistrationfee.innerText="$200";
    cardregistrationfee.classList="regfees";

    const cardDesc = document.createElement("div");
    cardDesc.classList.add("card-desc");
    cardDesc.classList.add("truncate");

    // cardDesc.classList.add("card-desc");

    cardDesc.innerHTML = cardData[i].description;

    cardInfo.appendChild(cardregistrationfee);

    cardInfo.appendChild(cardDesc);



  
    cards.appendChild(cardImgContainer);
    cards.appendChild(cardInfo);

    cardsDiv.appendChild(cards);
  }


  cardsDiv.addEventListener("click", (event) => {
    const eventdesc = event.target.closest(".card");
    console.log(eventdesc)
    // console.log(event)

    if (eventdesc) {
      event.stopPropagation();
      const cardIndex = [...cardsDiv.children].indexOf(eventdesc);
      console.log(cardIndex);
      console.log(cardData[cardIndex]);
      showPopup(cardData[cardIndex]);

    }
  });

  cardsDiv.removeEventListener("click",(event) => {
    const eventdesc = event.target.closest(".card");
    console.log(eventdesc)
    // console.log(event)

    if (eventdesc) {
      event.stopPropagation();
      const cardIndex = [...cardsDiv.children].indexOf(eventdesc);
      console.log(cardIndex);
      console.log(cardData[cardIndex]);
      showPopup(cardData[cardIndex]);

    }
  });
}



function showPopup(cardData) {
  const existingPopup = document.querySelector(".popup");
  if (existingPopup) {
    // if a popup element already exists, remove it
    existingPopup.remove();
  }

  const popup = document.createElement("div");
  popup.classList.add("popup");

  const closeBtnDiv = document.createElement("div");
  closeBtnDiv.classList.add("close-btn-div");

  const CloseBtn = document.createElement("button");
  CloseBtn.classList.add("close");
  CloseBtn.innerHTML = "X";

  closeBtnDiv.appendChild(CloseBtn);

  popup.appendChild(closeBtnDiv);

  const popupContent = document.createElement("div");
  popupContent.classList.add("popup-content");

  const popupTitle = document.createElement("h3");
  popupTitle.innerHTML = cardData.title;

  const popupDesc = document.createElement("p");
  popupDesc.innerHTML = cardData.desc;

  popup.appendChild(popupTitle);
  popup.appendChild(popupDesc);
  popup.appendChild(popupContent);

  CloseBtn.addEventListener("click", () => {
    // close the popup when the close button is clicked
    popup.remove();
  });

  document.body.appendChild(popup);

}